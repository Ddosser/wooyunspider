function format_input(){
    instring = document.getElementById("keywords").value;
    instring = instring.replace(/(^\s*)|(\s*$)/g, "").replace("&","%25").replace("#","%23");
}

function search_post(URL, PARAMS) {        
    var temp = document.createElement("form");
    temp.action = URL;
    temp.method = "POST";
    temp.name = "keywords"; 
    temp.id = "keywords"; 
    temp.style.display = "none";
    for (var x in PARAMS) {
        var opt = document.createElement("textarea");        
        opt.name = x;        
        opt.value = PARAMS[x];        
        // alert(opt.name)        
        temp.appendChild(opt);        
    }        
    document.body.appendChild(temp);
    temp.submit();
    return temp;
} 

// var xmlhttp;
/*function search_openbug()
{
    var xmlhttp;
    format_input();
    if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
      }
    else{// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    //xmlhttp.onreadystatechange = fResponse;
    xmlhttp.open("GET","/search?page=1&keywords=" + instring,true);
    //xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    // xmlhttp.send("page=1&keywords=" + instring);
    xmlhttp.send();
    //alert("Ok");
}*/

/*function fResponse(){
    if (xmlhttp.readyState == 4) {
        if (xmlhttp.status == 400) {
        alert(xmlhttp.responseText);
        } else {
        alert('There was a problem with the request.');
    }
}
}*/

function search_openbug(){
    format_input();
    if(instring == ""){
        alert("好像忘了输点什么！^_^");
        msgbox("亲！搜啥","好像忘了输点什么！^_^","",null,0,"Warning");
    }
    else{
        search_post("/search", {"keywords": instring, "searchwhat": "openbug"});
        //window.open("http://127.0.0.1:5000/search?stype=openbug&keywords=" + instring);
    }
}

function search_knowledge(){
    format_input();
    if(instring == ""){
        alert("好像忘了输点什么！^_^");
    }
    else{
        search_post("/search", {"keywords": instring, "searchwhat": "knowledge"});
        // window.open("http://127.0.0.1:5000/search?stype=openbug&keywords=" + instring);
    }
}
